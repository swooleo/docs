{"config":{"lang":["en"],"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"\u4ecb\u7ecd Swoole \u662f\u4e00\u4e2a\u9762\u5411\u751f\u4ea7\u73af\u5883\u7684 PHP \u534f\u7a0b\u6846\u67b6\u3002 \u6ce8\u610f \u672c\u6587\u6863\u59cb\u7ec8\u4ee5\u6700\u65b0\u7684 Swoole \u4e3a\u51c6\u3002","title":"\u4ecb\u7ecd"},{"location":"#_1","text":"Swoole \u662f\u4e00\u4e2a\u9762\u5411\u751f\u4ea7\u73af\u5883\u7684 PHP \u534f\u7a0b\u6846\u67b6\u3002","title":"\u4ecb\u7ecd"},{"location":"#_2","text":"\u672c\u6587\u6863\u59cb\u7ec8\u4ee5\u6700\u65b0\u7684 Swoole \u4e3a\u51c6\u3002","title":"\u6ce8\u610f"},{"location":"\u5feb\u901f\u5f00\u59cb/","text":"\u5feb\u901f\u5f00\u59cb Swoole \u53ef\u4ee5\u901a\u8fc7 Pecl \u6216\u8005\u6e90\u7801\u6765\u8fdb\u884c\u5b89\u88c5\u3002 Pecl\uff08\u63a8\u8350\uff09 \u9996\u5148\u901a\u8fc7 pecl \u5de5\u5177\u4e0b\u8f7d\u548c\u7f16\u8bd1 Swoole \u6269\u5c55\uff1a # \u5b89\u88c5\u6700\u65b0\u7248\u672c pecl install swoole # \u5b89\u88c5\u6307\u5b9a\u7248\u672c pecl install swoole-4.4.8 \u7f16\u8bd1\u6210\u529f\u4e4b\u540e\uff0c\u628a Swoole \u6dfb\u52a0\u5230 php.ini \u914d\u7f6e\u6587\u4ef6\u91cc\u9762\u3002\u914d\u7f6e\u6587\u4ef6\u7684\u8def\u5f84\u53ef\u4ee5\u901a\u8fc7\u5982\u4e0b\u547d\u4ee4\u8fdb\u884c\u67e5\u627e\uff0c\u4f8b\u5982\uff1a php --ini Configuration File (php.ini) Path: /etc Loaded Configuration File: /etc/php.ini Scan for additional .ini files in: /etc/php.d \u63a8\u8350\u5728 additional .ini \u76ee\u5f55\u91cc\u9762\u5355\u72ec\u4e3a Swoole \u521b\u5efa\u4e00\u4e2a\u914d\u7f6e\u6587\u4ef6\uff0c\u4f8b\u5982\uff1a touch /etc/php.d/swoole.ini cat > /etc/php.d/swoole.ini <<EOF ; Enable swoole extension module extension=swoole.so EOF \u6e90\u7801\u5b89\u88c5 \u4e0b\u8f7d\u4e00\u4efd\u5df2\u7ecf release \u7684 Swoole \u6e90\u7801\uff1a curl -L https://github.com/swoole/swoole-src/archive/v4.4.12.tar.gz -o swoole-src-4.4.12.tar.gz \\ && tar -xvf swoole-src-4.4.12.tar.gz \\ && cd swoole-src-4.4.12 \\ && phpize \\ && ./configure \\ && make -j4 \\ && make install \u7136\u540e\u6309\u7167\u4e0a\u9762\u7684\u65b9\u5f0f\u628a Swoole \u6dfb\u52a0\u5230\u914d\u7f6e\u6587\u4ef6 php.ini \u91cc\u9762\u5373\u53ef\u3002 \u9a8c\u8bc1\u662f\u5426\u5b89\u88c5\u6210\u529f php --ri swoole","title":"\u5feb\u901f\u5f00\u59cb"},{"location":"\u5feb\u901f\u5f00\u59cb/#_1","text":"Swoole \u53ef\u4ee5\u901a\u8fc7 Pecl \u6216\u8005\u6e90\u7801\u6765\u8fdb\u884c\u5b89\u88c5\u3002","title":"\u5feb\u901f\u5f00\u59cb"},{"location":"\u5feb\u901f\u5f00\u59cb/#pecl","text":"\u9996\u5148\u901a\u8fc7 pecl \u5de5\u5177\u4e0b\u8f7d\u548c\u7f16\u8bd1 Swoole \u6269\u5c55\uff1a # \u5b89\u88c5\u6700\u65b0\u7248\u672c pecl install swoole # \u5b89\u88c5\u6307\u5b9a\u7248\u672c pecl install swoole-4.4.8 \u7f16\u8bd1\u6210\u529f\u4e4b\u540e\uff0c\u628a Swoole \u6dfb\u52a0\u5230 php.ini \u914d\u7f6e\u6587\u4ef6\u91cc\u9762\u3002\u914d\u7f6e\u6587\u4ef6\u7684\u8def\u5f84\u53ef\u4ee5\u901a\u8fc7\u5982\u4e0b\u547d\u4ee4\u8fdb\u884c\u67e5\u627e\uff0c\u4f8b\u5982\uff1a php --ini Configuration File (php.ini) Path: /etc Loaded Configuration File: /etc/php.ini Scan for additional .ini files in: /etc/php.d \u63a8\u8350\u5728 additional .ini \u76ee\u5f55\u91cc\u9762\u5355\u72ec\u4e3a Swoole \u521b\u5efa\u4e00\u4e2a\u914d\u7f6e\u6587\u4ef6\uff0c\u4f8b\u5982\uff1a touch /etc/php.d/swoole.ini cat > /etc/php.d/swoole.ini <<EOF ; Enable swoole extension module extension=swoole.so EOF","title":"Pecl\uff08\u63a8\u8350\uff09"},{"location":"\u5feb\u901f\u5f00\u59cb/#_2","text":"\u4e0b\u8f7d\u4e00\u4efd\u5df2\u7ecf release \u7684 Swoole \u6e90\u7801\uff1a curl -L https://github.com/swoole/swoole-src/archive/v4.4.12.tar.gz -o swoole-src-4.4.12.tar.gz \\ && tar -xvf swoole-src-4.4.12.tar.gz \\ && cd swoole-src-4.4.12 \\ && phpize \\ && ./configure \\ && make -j4 \\ && make install \u7136\u540e\u6309\u7167\u4e0a\u9762\u7684\u65b9\u5f0f\u628a Swoole \u6dfb\u52a0\u5230\u914d\u7f6e\u6587\u4ef6 php.ini \u91cc\u9762\u5373\u53ef\u3002","title":"\u6e90\u7801\u5b89\u88c5"},{"location":"\u5feb\u901f\u5f00\u59cb/#_3","text":"php --ri swoole","title":"\u9a8c\u8bc1\u662f\u5426\u5b89\u88c5\u6210\u529f"},{"location":"coroutine/scheduler/set/","text":"Coroutine::Set Coroutine::set \u7528\u6765\u8bbe\u7f6e\u534f\u7a0b\u76f8\u5173\u9009\u9879\u3002 Swoole\\Coroutine::set <?php public static function set($options) { } @param array $options @return mixed max_coroutine \u8bbe\u7f6e\u6700\u5927\u534f\u7a0b\u6570\uff0c\u8d85\u8fc7\u9650\u5236\u540e\u5e95\u5c42\u5c06\u65e0\u6cd5\u521b\u5efa\u65b0\u7684\u534f\u7a0b\u3002 \u6ce8\u610f\uff0c\u8fd9\u4e2a\u6700\u5927\u534f\u7a0b\u6570\u6307\u7684\u662f\u8fd9\u4e2a\u7ebf\u7a0b\u76ee\u524d\u5b58\u6d3b\u7684\u534f\u7a0b\u6570\uff0c\u800c\u4e0d\u662f\u521b\u5efa\u7684\u534f\u7a0b\u4e2a\u6570\u3002\u56e0\u4e3a\u6b7b\u4ea1\u7684\u534f\u7a0b\u662f\u4e0d\u8bb0\u5f55\u5728\u534f\u7a0b\u4e2a\u6570\u91cc\u9762\u7684\u3002 \u4f8b\u5b50\uff1a <?php Swoole\\Coroutine::set([ 'max_coroutine' => 5, ]); for ($i=0; $i < 6; $i++) { go(function() { echo 'swoole' . PHP_EOL; }); } swoole swoole swoole swoole swoole swoole \u4f9d\u7136\u53ef\u4ee5\u521b\u5efa\u51fa 6 \u4e2a\u534f\u7a0b\u3002\u56e0\u4e3a\u534f\u7a0b\u521b\u5efa\u5b8c\u4e4b\u540e\uff0c\u6267\u884c echo \u5c31\u4f1a\u7acb\u9a6c\u6b7b\u4ea1\uff0c\u63a5\u7740\u521b\u5efa\u4e0b\u4e00\u4e2a\u534f\u7a0b\u3002 \u4f46\u662f\uff0c\u4e0b\u9762\u8fd9\u4e2a\u4f8b\u5b50\u662f\u4f1a\u5931\u8d25\u7684\uff1a <?php Swoole\\Coroutine::set([ 'max_coroutine' => 5, ]); go(function() { echo 'swoole' . PHP_EOL; go(function() { echo 'swoole' . PHP_EOL; go(function() { echo 'swoole' . PHP_EOL; go(function() { echo 'swoole' . PHP_EOL; go(function() { echo 'swoole' . PHP_EOL; go(function() { echo 'swoole' . PHP_EOL; }); }); }); }); }); }); php set.php swoole swoole swoole swoole swoole PHP Warning: go(): exceed max number of coroutine 5 in /root/codeDir/phpCode/swoole/coroutine/coroutine/set.php on line 19 c_stack_size \u8bbe\u7f6e\u5355\u4e2a\u534f\u7a0b\u521d\u59cb\u6808\u7684\u5185\u5b58\u5c3a\u5bf8\uff0c\u5355\u4f4d\u662f B \uff0c\u9ed8\u8ba4\u4e3a 2 * 1024 * 1024B \uff0c\u5373 2MB \u3002\u8303\u56f4\uff1a 256 * 1024B \uff5e 16 * 1024 * 1024 \u3002 \u6ce8\u610f\uff0c\u8fd9\u91cc\u8bbe\u7f6e\u7684\u662f\u534f\u7a0b\u521d\u59cbC\u6808\u7684\u5927\u5c0f\uff0c\u800c\u4e0d\u662f\u534f\u7a0b\u521d\u59cbPHP\u6808\u7684\u5927\u5c0f\u3002 \u534f\u7a0b\u521d\u59cbPHP\u6808\u7684\u5927\u5c0f\u76ee\u524d\u662f\u56fa\u5b9a\u76848 * 1024B\u3002 log_level \u65e5\u5fd7\u7b49\u7ea7\u3002 trace_flags \u8ddf\u8e2a\u6807\u7b7e\u3002 socket_connect_timeout \u5efa\u7acb socket \u8fde\u63a5\u8d85\u65f6\u65f6\u95f4, \u9ed8\u8ba4\u4e3a 1s \u3002 socket_timeout socket \u8bfb\u5199\u64cd\u4f5c\u8d85\u65f6\u65f6\u95f4, \u9ed8\u8ba4\u4e3a -1 , \u5373\u6c38\u4e0d\u8d85\u65f6\u3002 dns_cache_expire \u8bbe\u7f6e swoole dns \u7f13\u5b58\u5931\u6548\u65f6\u95f4\uff0c\u5355\u4f4d s \uff0c\u9ed8\u8ba4 60s \u3002 dns_cache_capacity \u8bbe\u7f6e swoole dns \u7f13\u5b58\u5bb9\u91cf\uff0c\u9ed8\u8ba4 1000 \u3002 enable_preemptive_scheduler \u8bbe\u7f6e\u6253\u5f00\u5199\u6210\u62a2\u5360\u5f0f\u8c03\u5ea6\uff0c\u534f\u7a0b\u6700\u5927\u6267\u884c\u65f6\u95f4\u4e3a 10ms \u3002","title":"Scheduler::Set"},{"location":"coroutine/scheduler/set/#coroutineset","text":"Coroutine::set \u7528\u6765\u8bbe\u7f6e\u534f\u7a0b\u76f8\u5173\u9009\u9879\u3002 Swoole\\Coroutine::set <?php public static function set($options) { } @param array $options @return mixed","title":"Coroutine::Set"},{"location":"coroutine/scheduler/set/#max_coroutine","text":"\u8bbe\u7f6e\u6700\u5927\u534f\u7a0b\u6570\uff0c\u8d85\u8fc7\u9650\u5236\u540e\u5e95\u5c42\u5c06\u65e0\u6cd5\u521b\u5efa\u65b0\u7684\u534f\u7a0b\u3002 \u6ce8\u610f\uff0c\u8fd9\u4e2a\u6700\u5927\u534f\u7a0b\u6570\u6307\u7684\u662f\u8fd9\u4e2a\u7ebf\u7a0b\u76ee\u524d\u5b58\u6d3b\u7684\u534f\u7a0b\u6570\uff0c\u800c\u4e0d\u662f\u521b\u5efa\u7684\u534f\u7a0b\u4e2a\u6570\u3002\u56e0\u4e3a\u6b7b\u4ea1\u7684\u534f\u7a0b\u662f\u4e0d\u8bb0\u5f55\u5728\u534f\u7a0b\u4e2a\u6570\u91cc\u9762\u7684\u3002 \u4f8b\u5b50\uff1a <?php Swoole\\Coroutine::set([ 'max_coroutine' => 5, ]); for ($i=0; $i < 6; $i++) { go(function() { echo 'swoole' . PHP_EOL; }); } swoole swoole swoole swoole swoole swoole \u4f9d\u7136\u53ef\u4ee5\u521b\u5efa\u51fa 6 \u4e2a\u534f\u7a0b\u3002\u56e0\u4e3a\u534f\u7a0b\u521b\u5efa\u5b8c\u4e4b\u540e\uff0c\u6267\u884c echo \u5c31\u4f1a\u7acb\u9a6c\u6b7b\u4ea1\uff0c\u63a5\u7740\u521b\u5efa\u4e0b\u4e00\u4e2a\u534f\u7a0b\u3002 \u4f46\u662f\uff0c\u4e0b\u9762\u8fd9\u4e2a\u4f8b\u5b50\u662f\u4f1a\u5931\u8d25\u7684\uff1a <?php Swoole\\Coroutine::set([ 'max_coroutine' => 5, ]); go(function() { echo 'swoole' . PHP_EOL; go(function() { echo 'swoole' . PHP_EOL; go(function() { echo 'swoole' . PHP_EOL; go(function() { echo 'swoole' . PHP_EOL; go(function() { echo 'swoole' . PHP_EOL; go(function() { echo 'swoole' . PHP_EOL; }); }); }); }); }); }); php set.php swoole swoole swoole swoole swoole PHP Warning: go(): exceed max number of coroutine 5 in /root/codeDir/phpCode/swoole/coroutine/coroutine/set.php on line 19","title":"max_coroutine"},{"location":"coroutine/scheduler/set/#c_stack_size","text":"\u8bbe\u7f6e\u5355\u4e2a\u534f\u7a0b\u521d\u59cb\u6808\u7684\u5185\u5b58\u5c3a\u5bf8\uff0c\u5355\u4f4d\u662f B \uff0c\u9ed8\u8ba4\u4e3a 2 * 1024 * 1024B \uff0c\u5373 2MB \u3002\u8303\u56f4\uff1a 256 * 1024B \uff5e 16 * 1024 * 1024 \u3002 \u6ce8\u610f\uff0c\u8fd9\u91cc\u8bbe\u7f6e\u7684\u662f\u534f\u7a0b\u521d\u59cbC\u6808\u7684\u5927\u5c0f\uff0c\u800c\u4e0d\u662f\u534f\u7a0b\u521d\u59cbPHP\u6808\u7684\u5927\u5c0f\u3002 \u534f\u7a0b\u521d\u59cbPHP\u6808\u7684\u5927\u5c0f\u76ee\u524d\u662f\u56fa\u5b9a\u76848 * 1024B\u3002","title":"c_stack_size"},{"location":"coroutine/scheduler/set/#log_level","text":"\u65e5\u5fd7\u7b49\u7ea7\u3002","title":"log_level"},{"location":"coroutine/scheduler/set/#trace_flags","text":"\u8ddf\u8e2a\u6807\u7b7e\u3002","title":"trace_flags"},{"location":"coroutine/scheduler/set/#socket_connect_timeout","text":"\u5efa\u7acb socket \u8fde\u63a5\u8d85\u65f6\u65f6\u95f4, \u9ed8\u8ba4\u4e3a 1s \u3002","title":"socket_connect_timeout"},{"location":"coroutine/scheduler/set/#socket_timeout","text":"socket \u8bfb\u5199\u64cd\u4f5c\u8d85\u65f6\u65f6\u95f4, \u9ed8\u8ba4\u4e3a -1 , \u5373\u6c38\u4e0d\u8d85\u65f6\u3002","title":"socket_timeout"},{"location":"coroutine/scheduler/set/#dns_cache_expire","text":"\u8bbe\u7f6e swoole dns \u7f13\u5b58\u5931\u6548\u65f6\u95f4\uff0c\u5355\u4f4d s \uff0c\u9ed8\u8ba4 60s \u3002","title":"dns_cache_expire"},{"location":"coroutine/scheduler/set/#dns_cache_capacity","text":"\u8bbe\u7f6e swoole dns \u7f13\u5b58\u5bb9\u91cf\uff0c\u9ed8\u8ba4 1000 \u3002","title":"dns_cache_capacity"},{"location":"coroutine/scheduler/set/#enable_preemptive_scheduler","text":"\u8bbe\u7f6e\u6253\u5f00\u5199\u6210\u62a2\u5360\u5f0f\u8c03\u5ea6\uff0c\u534f\u7a0b\u6700\u5927\u6267\u884c\u65f6\u95f4\u4e3a 10ms \u3002","title":"enable_preemptive_scheduler"}]}